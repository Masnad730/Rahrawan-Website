{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Volumes/Emal - Data/masnad-law-firm/Rahrawan Website/rahrawan-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Volumes/Emal - Data/masnad-law-firm/Rahrawan Website/rahrawan-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Volumes/Emal - Data/masnad-law-firm/Rahrawan Website/rahrawan-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport Loader from 'react-loader-spinner';\nimport Fade from 'react-reveal/Fade';\nimport { useSnackbar } from 'react-simple-snackbar';\nimport axios from 'axios';\nimport { options } from '../components/SnackbarNotification/settings';\n\nvar NewsLetter = function NewsLetter() {\n  var _useSnackbar = useSnackbar(options),\n      _useSnackbar2 = _slicedToArray(_useSnackbar, 2),\n      openSnackbar = _useSnackbar2[0],\n      closeSnackbar = _useSnackbar2[1]; // News letter form handling\n\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var handleChange = function handleChange(e) {\n    setEmail(e.target.value);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              setIsLoading(true);\n              _context2.next = 4;\n              return axios.post('https://wpbackend.navisa.af/wp-json/jwt-auth/v1/token', {\n                username: 'admin',\n                password: 'I6FR%0^hD@Z[@'\n              }).then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return axios.post('https://wpbackend.navisa.af/wp-json/wp/v2/rahrawan-sub-emails', {\n                            title: 'Subscribed Email - Rahrawan Travels',\n                            status: 'publish',\n                            fields: {\n                              email: email\n                            }\n                          }, {\n                            headers: {\n                              Authorization: \"Bearer \".concat(res.data.token)\n                            }\n                          }).then(function (res) {\n                            setIsLoading(false);\n\n                            if (res.status === 201) {\n                              openSnackbar('Your message has been submitted successfully.');\n                              setIsLoading(false);\n                            } else {\n                              openSnackbar('There was an error trying to send your message, Please try again.');\n                              setIsLoading(false);\n                            }\n\n                            return res.data;\n                          })[\"catch\"](function (err) {\n                            console.log(err);\n                            setIsLoading(false);\n                            openSnackbar('There was an error trying to send your message, Please check your network connection and try again.');\n                          });\n\n                        case 2:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x2) {\n                  return _ref2.apply(this, arguments);\n                };\n              }())[\"catch\"](function (err) {\n                console.log(err);\n              });\n\n            case 4:\n              setEmail('');\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"newsletter\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"newsletter__wrap\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"newsletter__info-box\",\n        children: [/*#__PURE__*/_jsxs(Fade, {\n          up: true,\n          children: [/*#__PURE__*/_jsx(\"h3\", {\n            className: \"heading-primary\",\n            children: \"Subscribe to our newsletters!\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"newsletter__paragraph\",\n            children: \"Sign up for our mailing list to get latest updates and offers.\"\n          })]\n        }), /*#__PURE__*/_jsx(\"form\", {\n          onSubmit: handleSubmit,\n          children: /*#__PURE__*/_jsx(Fade, {\n            up: true,\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"subscribe\",\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                name: \"email\",\n                type: \"email\",\n                value: email,\n                onChange: handleChange,\n                required: true,\n                className: \"subscribe__input\",\n                placeholder: \"Enter your email\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"submit\",\n                className: \"btn subscribe__btn\",\n                children: isLoading ? /*#__PURE__*/_jsx(Loader, {\n                  type: \"Oval\",\n                  color: \"#fff\",\n                  height: 15,\n                  width: 15\n                }) : 'Subscribe'\n              })]\n            })\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default NewsLetter;","map":null,"metadata":{},"sourceType":"module"}